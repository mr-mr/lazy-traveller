function loadJSON(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){d.readyState===XMLHttpRequest.DONE&&(200===d.status?b&&b(JSON.parse(d.responseText)):c&&c(d))},d.open("GET",a,!0),d.send()}loadJSON("https://api.tfl.gov.uk/Line/Mode/tube,overground,dlr/Status?detail=False&app_id=2a97af33&app_key=9850b4c32b20ab40726bc8ef92d9573b",function(a){var b=[a[2],a[11]],c=a[0].lineStatuses[0].statusSeverityDescription,d=c.replace("Good Service","<i class='fa fa-check tick'></i>"),e=c.replace("Good Service","<i class='fa fa-warning tick'></i>");console.log("Tube status - "+c),b.forEach(function(a){var b=document.createElement("div");"Minor Delays"===c?b.innerHTML=a.name+e:b.innerHTML=a.name+d,b.classList.add(a.id),document.body.appendChild(b)}),loadJSON("https://api.tfl.gov.uk/Line/Mode/national-rail/Status?detail=False&app_id=2a97af33&app_key=9850b4c32b20ab40726bc8ef92d9573b",function(a){var b=[a[22],a[19]],c=b[0].lineStatuses[0].statusSeverityDescription,d=c.replace("Good Service","<i class='fa fa-check tick'></i>"),e=c.replace("Minor Delays","<i class='fa fa-warning tick'></i>");console.log("Train status - "+c),b.forEach(function(a){var b=document.createElement("div"),f=a.name;"Minor Delays"===c?b.innerHTML=f+e:b.innerHTML=f+d,b.classList.add(a.id),document.body.appendChild(b)})}),loadJSON("https://api.tfl.gov.uk/StopPoint/490013818H/arrivals?detail=False&app_id=2a97af33&app_key=9850b4c32b20ab40726bc8ef92d9573b",function(a){var b=a.sort(function(a,b){return a.timeToStation-b.timeToStation}),c=b.slice(0,8);c.forEach(function(a){var b=document.createElement("div"),c=a.lineName,d=Math.floor(a.timeToStation/60);d<1?d="Due<i class='fa fa-bus tick'></i>":d+="<i class='fa fa-bus tick faded'></i>",document.getElementsByClassName("headline").innerHTML="Buses",b.innerHTML=c+" - "+d,b.classList.add(a.modeName),b.classList.add(a.timeToStation),document.body.appendChild(b)})})});